<div class="navbar navbar-expand-md navbar-dark mb-2">
  <%= link_to root_path, class: 'navbar-brand' do %>
    <%= image_tag('logo.png') %>
  <% end %>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent"
          aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarContent">
    <div class="navbar-nav mr-auto">
      <%= nav_link('Mounts', mounts_path, 'mounts') %>
      <%= nav_link('Minions', minions_path, 'minions') %>
      <%= nav_link('Orchestrion', orchestrions_path, 'orchestrions') %>
      <div class="nav-item dropdown">
        <a class="nav-link dropdown-toggle<%= ' active' if active_link?(achievements_path, 'achievement') %>" href="#"
          id="achievementsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
          aria-expanded="false">Achievements</a>
        <div class="dropdown-menu" aria-labelledBy="achievementsDropdown">
          <%= link_to 'Overview', achievements_path, class: 'dropdown-item bold' %>
          <% AchievementType.order(:id).all.each do |type| %>
            <%= link_to type.name, achievement_type_path(type), class: 'dropdown-item' %>
          <% end %>
        </div>
      </div>
      <div class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="otherDropdown" role="button" data-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false">Other</a>
        <div class="dropdown-menu" aria-labelledBy="otherDropdown">
          <%= link_to 'Emotes', emotes_path, class: 'dropdown-item' %>
          <%= link_to 'Bardings', bardings_path, class: 'dropdown-item' %>
          <%= link_to 'Hairstyles', hairstyles_path, class: 'dropdown-item' %>
          <%= link_to 'Armoire', armoires_path, class: 'dropdown-item' %>
        </div>
      </div>
    </div>
    <div class="navbar-nav nav-item dropdown">
      <a class="nav-link dropdown-toggle p-0 pr-3" href="#" id="localeDropdown" role="button" data-toggle="dropdown"
        aria-haspopup="true" aria-expanded="false"><%= cookies[:locale].upcase %></a>
      <div class="dropdown-menu" aria-labelledBy="localeDropdown">
        <% %w(EN DE FR JA).each do |locale| %>
          <%= link_to locale, locale_set_path(locale: locale), class: 'dropdown-item', method: :post %>
        <% end %>
      </div>
    </div>
    <% if user_signed_in? %>
      <div class="navbar-nav nav-item mr-2">
        <%= avatar(current_user) %>
      </div>
      <div class="navbar-nav nav-item dropdown">
        <a class="nav-link dropdown-toggle p-0" href="#" id="userDropdown" role="button" data-toggle="dropdown"
           aria-haspopup="true" aria-expanded="false"><%= current_user.username %></a>
        <div class="dropdown-menu" aria-labelledby="userDropdown">
          <%= link_to fa_icon('sign-out', text: 'Sign Out'), destroy_user_session_path, class: 'dropdown-item' %>
        </div>
      </div>
    <% else %>
      <%= link_to 'Sign in with Discord', user_discord_omniauth_authorize_path, class: 'btn btn-secondary' %>
    <% end %>
  </div>
</div>
